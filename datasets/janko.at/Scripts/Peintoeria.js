function Peintoeria(){var a=this;a.constructor();a.uis.puzzle=["Peintoeria"];var e=a.board.c,k=0,l=0,p=nil,r=[1,0,-1,0],t=[0,1,0,-1];a.charToValue=a.charToValue.concat(["a",0,"s",1,"d",nil,"x",0,"c",1,"v",nil,",",0,".",1,"-",nil,"/",nil]);a.cell.values=[0,1,p];a.enable.dragging=!0;a.keypad.left=nil;a.cell.nilalias=1;a.uic.dark[0]="#666666";a.init=function(){Object.getPrototypeOf(a).init.call(a)};a.reset2=function(){try{k=a.size.x;l=a.size.y;a.level.areas&&a.reset2areas(0,0,k,l,a.level.areas);if(a.level.problem){var d=
0;var c=a.level.problem.replace(/\s+/g," ").trim().split(" ");for(var b=0;b<l;b++)for(var f=0;f<k;f++){var g=c[d++];var h=e[f][b];"."==g||"-"==g?h.label=h.value=nil:"x"==g?h.value=0:"o"==g?h.value=1:h.label=parseInt(g);h.value!=nil&&(h.fixed=!0)}}if(a.level.solution)for(d=0,c=a.level.solution.replace(/\s+/g," ").trim().split(" "),b=0;b<l;b++)for(f=0;f<k;f++)h=e[f][b],g=c[d++],h.solution="x"==g?0:1}catch(m){throw a.exception(m),m;}};a.check2=function(){var d;try{for(var c=0;c<k;c++)for(var b=0;b<l;b++){var f=
e[c][b];if(e[c][b].label!=nil){for(var g=d=0;4>g;g++){var h=c+r[g];var m=b+t[g];0<=h&&h<k&&0<=m&&m<l&&0==e[h][m].value&&d++}f.label!=d&&(f.error=1)}}g=[];for(c=0;c<k;c++)for(b=0;b<l;b++)if(f=e[c][b],void 0===g[f.areas])g[f.areas]=f.value;else if(g[f.areas]!=f.value)for(h=0;h<k;h++)for(m=0;m<l;m++)e[h][m].areas==f.areas&&(e[h][m].error=3);for(c=0;c<k-1;c++)for(b=0;b<l-1;b++)e[c][b].value==nil&&(e[c][b].error=4);for(c=0;c<k-1;c++)for(b=0;b<l-1;b++){d=0;var n=e[c][b].value;0==n?(e[c][b+1].value==n&&
d++,e[c+1][b+1].value==n&&d++,e[c+1][b].value==n&&d++):(e[c][b+1].value!=nil&&1!=e[c][b+1].value||d++,e[c+1][b].value!=nil&&1!=e[c+1][b].value||d++,e[c+1][b+1].value!=nil&&1!=e[c+1][b+1].value||d++);3==d&&(e[c][b].error=e[c+1][b].error=e[c][b+1].error=e[c+1][b+1].error=2)}d=1;for(c=0;c<k;c++)for(b=0;b<l;b++)f=e[c][b],0==f.value&&0==f.count&&a.markArea(f,d++);2!=d&&(a.solved=!1)}catch(q){throw a.exception(q),q;}};a.makeMove2=function(d,c,b){try{for(Object.getPrototypeOf(this).makeMove2.call(this,d,
c,b),c=0;c<k;c++)for(b=0;b<l;b++){var f=e[c][b];f.areas==d.areas&&(f.value=d.value,f.color=d.color)}}catch(g){throw a.exception(g),g;}};a.cleanSolution=function(){for(var a=0;a<k;a++)for(var c=0;c<l;c++){var b=e[a][c];b.value==nil&&(b.value=1)}};a.valueToString=function(a,c){switch(a){case nil:return"-";case 0:return"x";case 1:return c?".":"-";default:return"%"}};a.paintCell=function(d){try{var c=a.canvas.getContext("2d");c.fillStyle=d.value==p?a.paintToImage&&a.moves.current==nil?a.uic.white:a.uic.gray:
1==d.value?a.uic.light[d.color]:!a.solved&&a.display.errors?a.uic.dark[(d.count-1)%10]:a.uic.dark[d.color];c.fillRect(d.px,d.py,a.unit.x,a.unit.y);d.label!=nil&&a.paintText(d.label.toString(),d,{color:0!=d.value?a.uic.text:a.uic.text2});a.paintSymbolMarkers(d);d.error&&a.display.errors&&(d.label!=nil?a.paintErrorCircle(d):a.paintErrorDot(d))}catch(b){throw a.exception(b),b;}};a.paintCurrentValue=function(){try{var d=a.uie.value,c=d.getContext("2d");c.fillStyle=a.current.value==p?a.uic.gray:0==a.current.value?
a.uic.black:a.uic.white;c.fillRect(0,0,d.width,d.height)}catch(b){throw a.exception(b),b;}}}Peintoeria.prototype=new Puzzle;
