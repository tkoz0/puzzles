function Bricks(){var a=this;a.constructor();a.uis.puzzle=["Bricks","Ziegelwand"];var f=a.board.c,m=0,k=0,h=0,l=0;zmax=zmin=1;a.enable.vmarkers=!0;a.enable.values=!1;a.enable.currentValue=!1;a.charToValue=a.charToValue.concat(["x",nil,",",nil,"-",nil,"/",nil]);a.init=function(){Object.getPrototypeOf(a).init.call(a)};a.reset2=function(){var b,e;try{m=a.labels.west;k=a.labels.north;h=a.size.x-a.labels.east;l=a.size.y-a.labels.south;zmin=1;zmax=a.size.x;a.cell.min=1;var d=a.cell.max=zmax;a.keypadValues=
a.keypad.numbers.slice(0,d);a.keypadValues[d++]=["\u2022",nil];a.cell.values=[];d=0;for(b=zmin;b<=zmax;b++)a.cell.values[d++]=b;a.cell.values[d++]=nil;if(a.level.areas){var c=0;"single"==a.level.areas?c=1:"double"==a.level.areas?c=2:a.reset2areas(m,k,h,l,a.level.areas);if(0!=c){d=1;for(var g=k;g<l;g++){var n=!1;if(1==c&&0==Math.mod(g,2)||2==c&&1==Math.mod(g,2))n=!0;for(e=0;e<h;)f[e][g].areas=d,n&&d++,n=!n,e++;n&&(f[h-1][g].areas=f[0][g].areas)}}}if(a.level.problem){b=0;var q=a.level.problem.replace(/\s+/g,
" ").trim().split(" ");for(g=k;g<l;g++)for(e=m;e<h;e++){var r=f[e][g];var p=q[b++];r.value="."==p||"-"==p?nil:parseInt(p);r.value!=nil&&(r.fixed=!0)}}if(a.level.solution)for(b=0,q=a.level.solution.replace(/\s+/g," ").trim().split(" "),g=k;g<l;g++)for(e=m;e<h;e++)r=f[e][g],p=q[b++],r.solution="."==p||"-"==p||"0"==p?nil:parseInt(p)}catch(t){throw a.exception(t),t;}};a.check2=function(){try{for(var b=m;b<h;b++){var e=[];for(var d=k;d<l;d++){var c=f[b][d];c.value==nil?c.error=1:void 0==e[c.value]?e[c.value]=
d:c.error=f[b][e[c.value]].error=3}}for(d=k;d<l;d++)for(e=[],b=m;b<h;b++)c=f[b][d],c.value==nil?c.error=1:void 0===e[c.value]?e[c.value]=b:c.error=f[e[c.value]][d].error=3;for(d=k;d<l;d++)for(b=m;b<h-1;){var g=f[b][d],n=f[b+1][d];b+=2;g.areas!=n.areas&&(n=f[h-1][d],--b);Math.even(g.value+n.value)&&(g.error=n.error=2)}}catch(q){throw a.exception(q),q;}};a.initValueMarkers2=function(){for(var b=m;b<h;b++)for(var e=k;e<l;e++){var d=f[b][e];if(d.value==nil)for(var c=zmin;c<=zmax;c++)d.markers.set(a.marker.numberBase+
c)}};a.updateValueMarkers2=function(){for(var b=k;b<l;b++)for(var e=m;e<h;e++){var d=f[e][b];if(d.value!=nil){for(var c=m;c<h;c++)f[c][b].markers.clear(a.marker.numberBase+d.value);for(c=k;c<l;c++)f[e][c].markers.clear(a.marker.numberBase+d.value);0==e?(c=f[e+1][b],d.areas!=c.areas&&(c=f[h-1][b])):e==h-1?(c=f[e-1][b],d.areas!=c.areas&&(c=f[0][b])):c=d.areas==f[e+1][b].areas?f[e+1][b]:f[e-1][b];for(d=Math.odd(d.value)?1:0;d<zmax;d+=2)c.markers.clear(a.marker.numberBase+d)}}};a.paintCell=function(b){try{var e=
a.canvas.getContext("2d");e.fillStyle=a.uic.light[b.color];e.fillRect(b.px,b.py,a.unit.x,a.unit.y);a.paintSymbolMarkers(b);a.paintValueMarkers(b);var d=b.fixed?a.uic.clue:a.uic.text;b.value!=nil&&a.paintText(b.value.toString(),b,{color:d});b.error&&a.display.errors&&(b.value==nil?a.paintErrorDot(b):a.paintErrorCircle(b))}catch(c){throw a.exception(c),c;}}}Bricks.prototype=new Puzzle;
