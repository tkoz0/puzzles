function Kurotto(){var a=this;a.constructor();a.uis.puzzle=["Kurotto"];var h=a.board.c,r=a.rlist,k=0,l=0,m=0,n=0,q=nil,t=[1,0,-1,0],u=[0,1,0,-1];a.charToValue=a.charToValue.concat(["a",0,"s",1,"d",nil,"x",0,"c",1,"v",nil,",",0,".",1,"-",nil,"/",nil]);a.cell.values=[0,1,q];a.enable.dragging=!0;a.enable.pgrid=!0;a.keypad.left=nil;a.cell.nilalias=1;a.init=function(){Object.getPrototypeOf(a).init.call(a)};a.reset2=function(){k=a.labels.west;l=a.labels.north;m=a.size.x-a.labels.east;n=a.size.y-a.labels.south;
if(a.level.problem){var b=0;var c=a.level.problem.replace(/\s+/g," ").trim().split(" ");for(var d=l;d<n;d++)for(var e=k;e<m;e++){var f=h[e][d];var g=c[b++];"."!=g&&"-"!=g&&("@"==g?(call.areas=a.cell.outside,f.fixed=!0,f.valid=!1):"x"==g?f.value=0:"o"==g?f.value=1:f.label=parseInt(g));if(f.value!=nil||f.label!=nil)f.fixed=!0;f.label!=nil&&(f.value=1)}}if(a.level.solution)for(b=0,c=a.level.solution.replace(/\s+/g," ").trim().split(" "),d=l;d<n;d++)for(e=k;e<m;e++)f=h[e][d],g=c[b++],f.solution="x"==
g?0:1};a.check2=function(){r.length=0;for(var b=1,c=k;c<m;c++)for(var d=l;d<n;d++){var e=h[c][d];0==e.value&&0==e.count&&a.markArea(e,b++)}for(c=k;c<m;++c)for(d=l;d<n;++d)if(h[c][d].label!=nil){b=[];for(var f=0,g=0;4>g;g++){e=c+t[g];var p=d+u[g];e>=k&&e<m&&p>=l&&p<n&&(e=h[e][p],0!=e.value||b[e.count]||(f+=a.rlist[e.count].length,b[e.count]=!0))}h[c][d].label!=f&&(h[c][d].error=1)}};a.cleanSolution=function(){for(var a=k;a<m;a++)for(var c=l;c<n;c++){var d=h[a][c];d.value==nil&&(d.value=1)}};a.valueToString=
function(a,c){switch(a){case nil:return"-";case 0:return"x";case 1:return c?".":"-";default:return"%"}};a.paintCell=function(b){var c=a.canvas.getContext("2d");c.fillStyle=b.value==nil?a.paintToImage&&a.moves.current==nil?a.uic.white:a.uic.gray:1==b.value?a.uic.light[b.color]:a.uic.dark[b.color];c.fillRect(b.px,b.py,a.unit.x,a.unit.y);b.label!=nil&&a.paintText(b.label.toString(),b);(b.label!=nil||1==b.value&&b.fixed)&&a.paintCircle(b,{stroke:a.uic.black,width:1});a.paintSymbolMarkers(b);b.error&&
a.display.errors&&(b.label!=nil?a.paintErrorCircle(b):a.paintErrorDot(b))};a.paintCurrentValue=function(){var b=a.uie.value,c=b.getContext("2d");c.fillStyle=a.current.value==q?a.uic.gray:0==a.current.value?a.uic.black:a.uic.white;c.fillRect(0,0,b.width,b.height)}}Kurotto.prototype=new Puzzle;
