function Doubleblock(){var a=this;a.constructor();a.uis.puzzle=["Doubleblock","Doppelblock"];var g=a.board.c,l=0,m=0,n=0,p=0;a.enable.vmarkers=!0;a.enable.pgrid=!0;a.enable.values=!1;a.enable.currentValue=!1;a.labels.north=a.labels.west=1;a.uic.cross="#333333";a.charToValue=a.charToValue.concat(["0",0,"x",0,",",0,"-",nil,"/",nil]);a.valueToMarker=[0,a.marker.letterX];a.init=function(){Object.getPrototypeOf(a).init.call(a)};a.reset2=function(){var b;try{a.size.z=a.size.x-3;l=a.labels.west;m=a.labels.north;
n=a.size.x-a.labels.east;p=a.size.y-a.labels.south;zmin=1;zmax=a.size.z;a.cell.min=zmin;a.cell.max=zmax;a.cell.values=[];var e=0;for(b=zmin;b<=zmax;b++)a.cell.values[e++]=b;a.cell.values[e++]=0;a.cell.values[e++]=nil;e=zmax;a.keypadValues=a.keypad.numbers.slice(0,e);a.keypadValues[e++]=["\u00d7",0,a.uic.dark];a.keypadValues[e++]=["\u2022",nil];a.infoText=a.uis.get("numbers")+": 1~"+zmax;if(a.level.problem){b=0;var d=a.level.problem.replace(/\s+/g," ").trim().split(" ");for(var c=m;c<p;c++)for(var f=
l;f<n;f++){var k=g[f][c];var h=d[b++];k.value="."==h||"-"==h?nil:"x"==h||"0"==h?0:parseInt(h);k.value!=nil&&(k.fixed=!0)}}if(a.level.solution)for(b=0,d=a.level.solution.replace(/\s+/g," ").trim().split(" "),c=m;c<p;c++)for(f=l;f<n;f++)k=g[f][c],h=d[b++],k.solution="."==h||"-"==h?nil:"x"==h||"0"==h?0:parseInt(h);if(a.level.clabels)for(b=0,d=a.level.clabels.replace(/\s+/g," ").trim().split(" "),f=l;f<n;f++)k=g[f][0],h=d[b++],k.label="-"==h||"."==h?nil:parseInt(h);if(a.level.rlabels)for(b=0,d=a.level.rlabels.replace(/\s+/g,
" ").trim().split(" "),c=m;c<p;c++)k=g[0][c],h=d[b++],k.label="-"==h||"."==h?nil:parseInt(h);if(!a.level.cabels&&!a.level.rlabels&&a.level.solution){for(f=l;f<n;f++)for(e=0,g[f][0].label=0,c=m;c<p;c++)0==g[f][c].solution?e++:1==e&&(g[f][0].label+=g[f][c].solution);for(c=m;c<p;c++)for(e=0,g[0][c].label=0,f=l;f<n;f++)0==g[f][c].solution?e++:1==e&&(g[0][c].label+=g[f][c].solution)}a.reset2labels()}catch(q){throw a.exception(q),q;}};a.check2=function(){try{for(var b=l;b<n;b++){var e=[];for(var d=m;d<
p;d++){var c=g[b][d];0!=c.value&&(g[b][d].value==nil?c.error=1:void 0===e[c.value]?e[c.value]=d:(c.error=3,g[b][e[c.value]].error=3))}for(var f=zmin;f<=zmax;f++)void 0===e[f]&&(a.solved=!1)}for(d=m;d<p;d++){e=[];for(b=l;b<n;b++)c=g[b][d],0!=c.value&&(c.value==nil?c.error=1:void 0===e[c.value]?e[c.value]=b:(c.error=3,g[e[c.value]][d].error=3));for(f=zmin;f<=zmax;f++)void 0===e[f]&&(a.solved=!1)}for(b=l;b<n;b++)if(g[b][0].label!=nil){var k=!1;var h=0;for(d=m;d<p;d++)0==g[b][d].value?k=!k:k&&(h+=g[b][d].value);
h!=g[b][0].label&&(g[b][0].error=2)}for(d=m;d<p;d++)if(g[0][d].label!=nil){k=!1;h=0;for(b=l;b<n;b++)0==g[b][d].value?k=!k:k&&(h+=g[b][d].value);h!=g[0][d].label&&(g[0][d].error=2)}}catch(q){throw a.exception(q),q;}};a.paintCell=function(b){try{b.areas==a.cell.label?a.paintLabelCell(b):a.paintValueCell(b)}catch(e){throw a.exception(e),e;}};a.paintLabelCell=function(b){try{var e=a.canvas.getContext("2d");e.fillStyle=a.uic.label;e.fillRect(b.px,b.py,a.unit.x,a.unit.y);b.label!=nil&&a.paintText(b.label.toString(),
b);b.error&&a.display.errors&&(b.label==nil?a.paintErrorDot(b):a.paintErrorCircle(b))}catch(d){throw a.exception(d),d;}};a.paintValueCell=function(b){try{var e=a.canvas.getContext("2d");e.fillStyle=0==b.value?a.uic.dark[b.color]:a.uic.light[b.color];e.fillRect(b.px,b.py,a.unit.x,a.unit.y);a.paintSymbolMarkers(b);a.paintValueMarkers(b);b.value!=nil&&0!=b.value&&a.paintText(b.value.toString(),b,{color:b.fixed?a.uic.clue:a.uic.text});b.error&&a.display.errors&&(b.value==nil?a.paintErrorDot(b):a.paintErrorCircle(b))}catch(d){throw a.exception(d),
d;}}}Doubleblock.prototype=new Puzzle;
