function Walls(){var b=this;b.constructor();b.uis.puzzle=["Walls","Mauerbau"];var h=b.board.c,k=0,l=0;b.charToValue=b.charToValue.concat(["h",10,"v",5,"x",nil,",",nil,".",nil,"-",nil,"/",nil]);b.cell.values=[5,10,nil];b.keypadValues=[["\u2014",10],["|",5],["\u2022",nil]];b.enable.dragging=!0;b.enable.pgrid=!0;b.keypad.left=nil;b.uic.smarkers="#000000";b.init=function(){Object.getPrototypeOf(b).init.call(b)};b.reset2=function(){try{k=b.size.x;l=b.size.y;if(b.level.problem){var a=0;var c=b.level.problem.replace(/\s+/g,
" ").trim().split(" ");for(var e=0;e<l;e++)for(var f=0;f<k;f++){var d=h[f][e];var g=c[a++];"."!=g&&"-"!=g&&("ns"==g||"v"==g?d.value=5:"ew"==g||"h"==g?d.value=10:d.label=parseInt(g));if(d.value!=nil||d.label!=nil)d.fixed=!0}}if(b.level.solution)for(a=0,c=b.level.solution.replace(/\s+/g," ").trim().split(" "),e=0;e<l;e++)for(f=0;f<k;f++)if(d=h[f][e],g=c[a++],"."==g||"-"==g)d.solution=nil;else if("ns"==g||"v"==g)d.solution=5;else if("ew"==g||"h"==g)d.solution=10}catch(m){throw b.exception(m),m;}};b.check2=
function(){try{for(var a=0;a<k;a++)for(var c=0;c<l;c++){var e=h[a][c];e.value==nil&&e.label==nil&&(e.error=1)}for(a=0;a<k;a++)for(c=0;c<l;c++)if(e=h[a][c],e.label>nil){for(var f=0,d=a;0<d&&10==h[d-1][c].value;d--)f++;for(d=a;d<k-1&&10==h[d+1][c].value;d++)f++;for(d=c;0<d&&5==h[a][d-1].value;d--)f++;for(d=c;d<l-1&&5==h[a][d+1].value;d++)f++;e.label!=f&&(e.error=3)}}catch(g){throw b.exception(g),g;}};b.dragTo2=function(a,c){a.x==c.x-1&&c.y==a.y&&(b.makeMove(c,10),b.makeMove(a,10));a.x==c.x+1&&c.y==
a.y&&(b.makeMove(c,10),b.makeMove(a,10));a.y==c.y+1&&c.x==a.x&&(b.makeMove(c,5),b.makeMove(a,5));a.y==c.y-1&&c.x==a.x&&(b.makeMove(c,5),b.makeMove(a,5))};b.valueToString=function(a,b){switch(a){case 16:return b?"x":"-";case 15:return"nsew";case 0:return"o";case 4:return"s";case 1:return"n";case 2:return"e";case 8:return"w";case 3:return"ne";case 9:return"nw";case 6:return"se";case 12:return"sw";case 5:return"ns";case 10:return"ew";default:return"-"}};b.paintCell=function(a){try{var c=b.canvas.getContext("2d");
c.fillStyle=a.label!=nil?b.uic.black:b.uic.light[0];c.fillRect(a.px,a.py,b.unit.x,b.unit.y);if(a.value!=nil){var e=Math.floor((b.unit.x-Math.floor(b.unit.x/4))/2),f=b.unit.x-2*e,d=f+e;c.fillStyle=b.display.errors&&0<a.count?b.uic.dark[a.count%10]:0==a.color?b.uic.line:b.uic.dark[a.color];0!=(a.value&1)&&c.fillRect(a.px+e,a.py,f,d);0!=(a.value&4)&&c.fillRect(a.px+e,a.py+e,f,d);0!=(a.value&2)&&c.fillRect(a.px+e,a.py+e,d,f);0!=(a.value&8)&&c.fillRect(a.px,a.py+e,d,f)}a.label>nil&&b.paintText(a.label.toString(),
a,{color:b.uic.white});b.paintSymbolMarkers(a);a.error&&b.display.errors&&(a.value==nil&&a.label==nil?b.paintErrorDot(a):b.paintErrorCircle(a))}catch(g){throw b.exception(g),g;}};b.paintCurrentValue=function(){try{var a=b.uie.value,c=a.getContext("2d");c.fillStyle=b.uic.white;c.fillRect(0,0,a.width,a.height);var e={x:0,y:0,w:a.width,h:a.height,color:b.uic.text,scale:90};5==b.current.value?b.paintText("|",c,e):10==b.current.value&&b.paintText("\u2014",c,e)}catch(f){throw b.exception(f),f;}}}
Walls.prototype=new Puzzle;
