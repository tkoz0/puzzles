var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,e,g){a!=Array.prototype&&a!=Object.prototype&&(a[e]=g.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(e){return $jscomp.SYMBOL_PREFIX+(e||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var e=0;return $jscomp.iteratorPrototype(function(){return e<a.length?{done:!1,value:a[e++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,e){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var g=0,h={next:function(){if(g<a.length){var m=g++;return{value:e(m,a[m]),done:!1}}h.next=function(){return{done:!0,value:void 0}};return h.next()}};h[Symbol.iterator]=function(){return h};return h};
$jscomp.polyfill=function(a,e,g,h){if(e){g=$jscomp.global;a=a.split(".");for(h=0;h<a.length-1;h++){var m=a[h];m in g||(g[m]={});g=g[m]}a=a[a.length-1];h=g[a];e=e(h);e!=h&&null!=e&&$jscomp.defineProperty(g,a,{configurable:!0,writable:!0,value:e})}};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
function Sokoban(){var a=this;a.constructor();a.uis.puzzle=["Sokoban"];var e=a.board.c,g=0,h=0;a.unit.max=50;a.enable.dragging=!0;a.enable.hint=!1;a.enable.check=!1;a.enable.colors=!1;a.enable.smarkers=!1;a.enable.values=!1;a.enable.pcursor=!1;a.keypad.left=nil;a.keypad.right=nil;a.moves.collapse=!1;a.score.split=1E5;a.score.label=a.uis.get("moves");a.score.optimize=a.score.minimize;a.solutionToString=a.solutionToStringGame;a.showSolution=a.showSolutionGame;a.isNewSolution=a.isNewSolutionGame;a.keys=
a.keys.concat(["pushes"]);a.uic.grid="#ffffff";a.uic.wall=a.uic.canvas;a.uic.floor="#f0f0c4";a.uic.stoneFill="#663300";a.uic.stoneEdge=a.uic.none;a.uic.goalFill=a.uic.none;a.uic.goalEdge="#33ee33";a.uic.boxFill="#339933";a.uic.boxEdge="#003300";a.uic.pusherFill="#3333cc";a.uic.pusherEdge="#000000";a.uis.boxes=["Boxes","Kisten","Bo\u00eetes","Scatole"];a.uim.edge=0;a.uim.grid=0;var m=new Image,p=new Image,q=new Image;m.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAASElEQVRIiWNgGAXkAmMGhv/UwAQtOTMzjSI8OCyhRpARHS/IriLEZkATH7qWoLNHLRmNkyFmCcOg9glNy67hU9TTpWYcBYQAADKxjlujugxMAAAAAElFTkSuQmCC";
p.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAgUlEQVRIiWPIYGT4n8HI8L+Mg3hMqnqGMg6G/2eMScOk6hm1ZKRaUsjK8H+VEmmYVD0M7QIM/5FxNhMqnxhMSA8DutfyWEgPPkJ6MCyhRRyNWjJSLSEmzRPKB+jy6HyG3VoM/wnhPBbCavCpxwgucoKDkPpRS0YtwY2zmUizBF09AJJpnb52La2AAAAAAElFTkSuQmCC";q.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAxklEQVRIie3VsQ3EIAwFUEagvDVcpqXMGpQ3Ait4FVahZAVKly59xSkRUUICl3A66WLpNwjrSQiDUn9VACR76Q5cAn0Feein1OQ0AkASA28GgM4hTCwGxkPEwChM3A7FwIIuVSPoksTQCHVFYmCxlsRams/7KFqjALx7JnwXMMP6epqBZjiPGWi1f1orQt4vN9fOyFaP94XZyRF0SZRqG0Z06YcQdGlxU1qQrf6qKr1RXR/IG9ktrVHyHK1/VKV/49L/5K68XvxWYg45XgFgAAAAAElFTkSuQmCC";
a.infoText="\u2022";var k=null;a.init=function(){Object.getPrototypeOf(a).init.call(a)};a.reset2=function(){try{g=a.size.x;h=a.size.y;k=null;a.level.score&&a.level.pushes&&(a.score.high=parseInt(a.level.pushes)*a.score.split+parseInt(a.level.score));if(a.level.problem)for(var c=a.level.problem.replace(/[\r\n]+/g,"\n").split("\n"),b=0;b<h;b++)for(var d=0;d<g&&d<c[b].length;d++){var f=e[d][b];switch(c[b].charAt(d)){case " ":f.value=nil;break;case "#":f.label=8;break;case ".":f.label=4;break;case "$":f.value=
2;break;case "*":f.label=4;f.value=2;break;case "+":f.label=4;f.value=1;k=f;break;case "@":f.value=1,k=f}}a.level.solution?a.level.moves=a.level.solution:a.level.moves&&(a.level.solution=a.level.moves);for(d=0;d<g;d++){for(b=0;b<h;b++)if(e[d][b].label==nil||e[d][b].areas==a.cell.outside)e[d][b].areas=a.cell.outside;else break;for(b=h-1;0<=b;b--)if(e[d][b].label==nil||e[d][b].areas==a.cell.outside)e[d][b].areas=a.cell.outside;else break}for(b=0;b<h;b++){for(d=0;d<g;d++)if(e[d][b].label==nil||e[d][b].areas==
a.cell.outside)e[d][b].areas=a.cell.outside;else break;for(d=g-1;0<=d;d--)if(e[d][b].label==nil||e[d][b].areas==a.cell.outside)e[d][b].areas=a.cell.outside;else break}for(d=0;d<g;d++)for(b=0;b<h;b++)if(8==e[d][b].label||e[d][b].areas==a.cell.outside)e[d][b].valid=!1,e[d][b].fixed=!0}catch(l){throw a.exception(l),l;}};a.check2=function(){try{for(var c=0;c<g;c++)for(var b=0;b<h;b++)if(4==e[c][b].label&&2!=e[c][b].value){a.solved=!1;return}}catch(d){throw a.exception(d),d;}};a.movesToString=function(){try{for(var c=
"",b="",d=0;d<a.moves.current+1;d++){var e=a.moves.list[d].split(",");switch(parseInt(e[3])){case 8:b+="n";break;case 2:b+="s";break;case 1:b+="e";break;case 4:b+="w";break;case 0:b+="x"}if(50<b.length||d==a.moves.current)c+=b+"\n",b=""}return c}catch(l){throw a.exception(l),l;}};a.movesFromString=function(c){try{a.checking.disable++;a.reset();a.moves.current=-1;a.moves.last=-1;c=c.replace(/[\s,;]+/g,"").trim().toLowerCase();for(var b=0;b<c.length;b++){var d=k.x,f=k.y;switch(c[b]){case "e":d++;break;
case "w":d--;break;case "s":f++;break;case "n":f--}a.makeMove(e[d][f],null,0)}}catch(l){ojdebug("Movelist: "+b+"\n",c),a.exception(l)}finally{a.checking.disable--}};a.moveToDxDy=function(c,b){try{var d=k.x+c,f=k.y+b;0<=d&&d<g&&0<=f&&f<h&&a.makeMove(e[d][f],null,null)}catch(l){throw a.exception(l),l;}};a.makeMove2=function(c,b,d){try{if(!a.solved){var f=b=0;k.x==c.x&&(f=c.y-k.y);k.y==c.y&&(b=c.x-k.x);if(!(0!=b&&0!=f||0==b&&0==f)){var h=Math.abs(b+f);1<b&&(b=1);1<f&&(f=1);-1>b&&(b=-1);-1>f&&(f=-1);
c=0;1==b&&(c=1);1==f&&(c=2);-1==b&&(c=4);-1==f&&(c=8);for(var g=0;g<h;g++){var n=e[k.x+b][k.y+f];if(8==n.label)n=null;else if(2==n.value){var m=e[n.x+b][n.y+f];2==m.value||8==m.label?n=null:(m.value=2,a.score.current+=a.score.split)}if(null==n)break;n.value=nil;Object.getPrototypeOf(this).makeMove2.call(this,n,c,d);n.value=1;k.value=nil;k=n;a.score.current++}}}}catch(r){throw a.exception(r),r;}};a.onDisplayScores=function(c){try{a.showSpinner(),setTimeout(a.onDisplayScores2.bind(this,c),0)}catch(b){throw a.exception(b),
b;}};a.onDisplayScores2=function(c){try{c='<table class="scores">\n';c+=" <tr>\n  <th>Nr.</th>\n  <th>Rekord von</th>\n  <th>Kisten</th>\n  <th>Z\u00fcge</th>\n </tr>\n";for(var b=0;b<a.levels.length;b++){a.select(b);if(0<a.level.score)try{a.server.timingSent=!0,a.movesFromString(a.level.solution),a.check(),a.solved?Math.div(a.score.current,a.score.split)!=Math.div(a.score.high,a.score.split)&&Math.mod(a.score.current,a.score.split)!=Math.mod(a.score.high,a.score.split)&&(c="<p>ERROR \u2013 INVALID SCORE: "+
(b+1)+"</p>\n"+c):c="<p>ERROR \u2013 NOT SOLVED: "+(b+1)+"</p>\n"+c}catch(l){c="<p>EXCEPTION: "+(b+1)+"</p>\n"+c}var d=a.config.documentName,e=d.lastIndexOf("/");d=d.substring(e+1)+"?level=";c+=' <tr>\n  <td><a href="'+d+(b+1)+'">'+(b+1)+"</a></td>\n  <td>"+(a.level.solver?a.level.solver:"-")+"</td>\n  <td>"+(a.level.score?Math.div(a.score.high,a.score.split):"-")+"</td>\n  <td>"+(a.level.score?Math.mod(a.score.high,a.score.split):"-")+"</td>\n </tr>\n"}new ojpopup(c+"</table>\n");a.select(0)}catch(l){throw a.exception(l),
l;}finally{a.hideSpinner()}};a.paintInfo=function(c){try{c=a.uis.get("boxes")+": "+Math.div(a.score.current,a.score.split)+" ("+Math.div(a.score.best,a.score.split)+") ["+Math.div(a.score.high,a.score.split)+"] \u2022 ",c+=a.uis.get("moves")+": "+Math.mod(a.score.current,a.score.split)+" ("+Math.mod(a.score.best,a.score.split)+") ["+Math.mod(a.score.high,a.score.split)+"] ",Object.getPrototypeOf(this).paintInfo.call(this,c)}catch(b){throw a.exception(b),b;}};a.paintCell=function(c){try{var b=a.canvas.getContext("2d");
b.fillStyle=8==c.label?a.uic.stoneFill:a.uic.floor;b.fillRect(c.px,c.py,a.unit.x,a.unit.y);8==c.label&&b.drawImage(p,c.px,c.py,a.unit.x,a.unit.y);1==c.value&&b.drawImage(q,c.px,c.py,a.unit.x,a.unit.y);2==c.value&&b.drawImage(m,c.px,c.py,a.unit.x,a.unit.y);8!=c.label&&(b.lineWidth=1,b.strokeStyle=a.uic.grid,b.beginPath(),0<c.x&&8!=e[c.x-1][c.y].label&&(b.moveTo(c.px,c.py),b.lineTo(c.px,c.py+a.unit.y)),0<c.y&&8!=e[c.x][c.y-1].label&&(b.moveTo(c.px,c.py),b.lineTo(c.px+a.unit.x,c.py)),b.stroke());4==
c.label&&a.paintCircle(c,{fill:a.uic.goalFill,stroke:a.uic.goalEdge,width:2,scale:50})}catch(d){throw a.exception(d),d;}}}Sokoban.prototype=new Puzzle;
