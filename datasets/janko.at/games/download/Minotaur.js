function Minotaur(){var a=this;a.constructor();a.uis.puzzle=["Theseus and Minotaur","Theseus und minotaurus"];var l=a.board.c,m=a.board.h,n=a.board.v,q=0,r=0;a.enable.dragging=!0;a.enable.tilt=!0;a.enable.hint=!1;a.enable.check=!1;a.enable.colors=!1;a.enable.smarkers=!1;a.enable.values=!1;a.enable.plines=!0;a.enable.pcursor=!1;a.keypad.left=nil;a.keypad.right=nil;a.moves.collapse=!1;a.score.label=a.uis.get("moves");a.score.optimize=a.score.minimize;a.solutionToString=a.solutionToStringGame;a.showSolution=
a.showSolutionGame;a.isNewSolution=a.isNewSolutionGame;a.uic.theseusText="#ffffff";a.uic.theseusFill="#cc0000";a.uic.theseusEdge=a.uic.none;a.uic.minotaurText="#ffffff";a.uic.minotaurFill="#0000cc";a.uic.minotaurEdge=a.uic.none;a.uic.goalFill=a.uic.none;a.uic.goalEdge="#000000";a.infoText="\u2022";var b=null,c=null,t=null;a.init=function(){Object.getPrototypeOf(a).init.call(a)};a.reset2=function(){try{q=a.size.x;r=a.size.y;if(a.level.problem&&a.level.problem.contains("-")){var e=0;var k=a.level.problem.replace(/\s+/g,
" ").trim().split(" ");for(var d=0;d<r;d++)for(var f=0;f<q;f++){var g=l[f][d];var h=k[e++];h.contains("t")&&(g.value=2,b=g,h=h.substring(1));h.contains("m")&&(g.value=1,c=g,h=h.substring(1));h.contains("g")&&(g.label=4,t=g,h=h.substring(1));h.contains("n")&&(m[f][d].value=a.line.wall);h.contains("s")&&(m[f][d+1].value=a.line.wall);h.contains("e")&&(n[f+1][d].value=a.line.wall);h.contains("w")&&(n[f][d].value=a.line.wall)}}if(a.level.problem&&!a.level.problem.contains("-"))for(e=0,k=a.level.problem.replace(/\s+/g,
" ").trim().split(" "),d=0;d<r;d++)for(f=0;f<q;f++){g=l[f][d];h=k[e++];var p=Math.floor(h/10);0!=(p&2)&&(g.value=2,b=g);0!=(p&1)&&(g.value=1,c=g);0!=(p&4)&&(g.label=4,t=g);p=h%10;0!=(p&8)&&(m[f][d].value=a.line.wall);0!=(p&2)&&(m[f][d+1].value=a.line.wall);0!=(p&4)&&(n[f][d].value=a.line.wall);0!=(p&1)&&(n[f+1][d].value=a.line.wall)}a.level.solution?a.level.moves=a.level.solution:a.level.moves&&(a.level.solution=a.level.moves)}catch(u){throw a.exception(u),u;}};a.check2=function(){try{b==c?(a.solved=
!0,a.result.code=a.result.lost):b==t?(a.solved=!0,a.result.code=a.result.won):(a.solved=!1,a.result.code=a.result.none)}catch(e){throw a.exception(e),e;}};a.movesToString=function(){try{for(var e="",b="",d=0;d<a.moves.current+1;d++){var c=a.moves.list[d].split(",");switch(parseInt(c[3])){case 8:b+="n";break;case 2:b+="s";break;case 1:b+="e";break;case 4:b+="w";break;case 0:b+="x"}if(50<b.length||d==a.moves.current)e+=b+"\n",b=""}return e}catch(g){throw a.exception(g),g;}};a.movesFromString=function(e){try{a.checking.disable++;
a.reset();a.moves.current=-1;a.moves.last=-1;e=e.replace(/[\s,;]+/g,"").trim().toLowerCase();for(var c=0;c<e.length;c++){var d=b.x,f=b.y;switch(e[c]){case "e":d++;break;case "w":d--;break;case "s":f++;break;case "n":f--}a.makeMove(l[d][f],null,0)}}catch(g){ojdebug("Movelist: "+c+"\n",e),a.exception(g)}finally{a.checking.disable--}};a.dragToDxDy=function(b,c,d){ojtrace(b,c,d);a.moveToDxDy(b,c,d)};a.moveToDxDy=function(e,c,d){try{var f=b.x+e,g=b.y+c;0<=f&&f<q&&0<=g&&g<r&&a.makeMove(l[f][g],null,null)}catch(h){throw a.exception(h),
h;}};a.makeMove2=function(e,k,d){try{if(!a.solved){if(e==b)k=0;else if(e.x==b.x)k=e.y<b.y?8:2;else if(e.y==b.y)k=e.x<b.x?4:1;else return;e=null;switch(k){case 1:b.x<q-1&&n[b.x+1][b.y].value!=a.line.wall&&(e=l[b.x+1][b.y]);break;case 4:0<b.x&&n[b.x][b.y].value!=a.line.wall&&(e=l[b.x-1][b.y]);break;case 2:b.y<r-1&&m[b.x][b.y+1].value!=a.line.wall&&(e=l[b.x][b.y+1]);break;case 8:0<b.y&&m[b.x][b.y].value!=a.line.wall&&(e=l[b.x][b.y-1]);break;case 0:e=b}if(null!=e)for(e.value=nil,Object.getPrototypeOf(this).makeMove2.call(this,
e,k,d),b.value=nil,b=e,b.value=2,a.score.current++,k=0;2>k&&(d=null,b.x<c.x&&0<c.x&&n[c.x][c.y].value!=a.line.wall?d=l[c.x-1][c.y]:b.x>c.x&&c.x<q-1&&n[c.x+1][c.y].value!=a.line.wall?d=l[c.x+1][c.y]:b.y<c.y&&0<c.y&&m[c.x][c.y].value!=a.line.wall?d=l[c.x][c.y-1]:b.y>c.y&&c.y<r-1&&m[c.x][c.y+1].value!=a.line.wall&&(d=l[c.x][c.y+1]),null!=d&&(c.value=nil,c=d,c.value=1),b!=c);k++);}}catch(f){throw a.exception(f),f;}};a.onKeyPress=function(e){try{a.current.item=b,Object.getPrototypeOf(this).onKeyPress.call(this,
e)}catch(k){throw a.exception(k),k;}};a.paintInfo=function(b){try{b=a.uis.get("moves")+": "+a.score.current+" ("+a.score.best+") ["+a.score.high+"] ",Object.getPrototypeOf(this).paintInfo.call(this,b)}catch(k){throw a.exception(k),k;}};a.paintCell=function(b){try{var c=a.canvas.getContext("2d");c.fillStyle=a.uic.light[0];c.fillRect(b.px,b.py,a.unit.x,a.unit.y);1==b.value&&(a.paintCircle(b,{fill:a.uic.minotaurFill,stroke:a.uic.minotaurEdge,scale:70}),a.paintText("M",b,{color:a.uic.minotaurText,scale:50}));
2==b.value&&(a.paintCircle(b,{fill:a.uic.theseusFill,stroke:a.uic.theseusEdge,scale:70}),a.paintText("T",b,{color:a.uic.theseusText,scale:50}));4==b.label&&a.paintCircle(b,{fill:a.uic.goalFill,stroke:a.uic.goalEdge,scale:80})}catch(d){throw a.exception(d),d;}}}Minotaur.prototype=new Puzzle;
