function Numbermaze(){var a=this;a.constructor();a.uis.puzzle=["Magic Labyrinth","Zahlenlabyrinth"];a.cell.nilalias=0;a.enable.vmarkers=!0;a.enable.values=!1;a.enable.currentValue=!1;a.charToValue=a.charToValue.concat(["0",0,"x",0,",",0,"-",nil,"/",nil]);a.valueToMarker=[0,a.marker.letterX];a.init=function(){Object.getPrototypeOf(a).init.call(a)};a.reset2=function(){var b;try{a.cell.min=1;a.cell.max=a.size.z;a.cell.values=[];var d=0;for(b=1;b<=a.size.z;b++)a.cell.values[d++]=b.toString();a.cell.values[d++]=
0;a.cell.values[d++]=nil;d=a.size.z;a.keypadValues=a.keypad.numbers.slice(0,d);a.keypadValues[d++]=["\u00d7",0];a.keypadValues[d++]=["\u2022",nil];a.infoText=a.uis.get("numbers")+": 1~"+a.size.z;if(a.level.problem){b=0;var e=a.level.problem.replace(/\s+/g," ").trim().split(" ");for(var c=0;c<a.size.y;c++)for(var f=0;f<a.size.x;f++){var g=a.board.c[f][c];var h=e[b++];g.value="."==h||"-"==h?nil:"x"==h?0:parseInt(h);g.value!=nil&&(g.fixed=!0)}}if(a.level.solution)for(b=0,e=a.level.solution.replace(/\s+/g,
" ").trim().split(" "),c=0;c<a.size.y;c++)for(f=0;f<a.size.x;f++)g=a.board.c[f][c],h=e[b++],g.solution="."==h||"-"==h||"x"==h?nil:parseInt(h);if(a.level.lines)for(b=0,e=a.level.lines.replace(/\s+/g," ").trim().split(" "),c=0;c<a.size.y;c++)for(f=0;f<a.size.x;f++)a.board.c[f][c].clues=parseInt(e[b++]);for(f=0;f<a.size.x;f++)for(c=0;c<a.size.y;c++)g=a.board.c[f][c],0<f&&g.clues!=a.board.c[f-1][c].clues+1&&g.clues!=a.board.c[f-1][c].clues-1&&(a.board.v[f][c].value=a.line.wall),0<c&&g.clues!=a.board.c[f][c-
1].clues+1&&g.clues!=a.board.c[f][c-1].clues-1&&(a.board.h[f][c].value=a.line.wall)}catch(k){throw a.exception(k),k;}};a.check2=function(){try{for(var b=0;b<a.size.x;b++){var d=[];for(var e=0;e<a.size.y;e++){var c=a.board.c[b][e];0!=c.value&&c.value!=nil&&(void 0===d[c.value]?d[c.value]=e:(c.error=3,a.board.c[b][d[c.value]].error=3))}for(var f=1;f<=a.size.z;f++)void 0===d[f]&&(a.solved=!1)}for(e=0;e<a.size.y;e++){d=[];for(b=0;b<a.size.x;b++)c=a.board.c[b][e],0!=c.value&&c.value!=nil&&(void 0===d[c.value]?
d[c.value]=b:(c.error=3,a.board.c[d[c.value]][e].error=3));for(f=1;f<=a.size.z;f++)void 0===d[f]&&(a.solved=!1)}e=b=0;d=1;for(f=0;f<a.size.x;f++)for(var g=0;g<a.size.x;g++)1==a.board.c[f][g].clues&&(b=f,e=g);for(;;){c=a.board.c[b][e];if(c.value!=nil&&0!=c.value)if(c.value==d)d<a.size.z?d++:d=1;else{c.error=1;break}if(c.clues==a.size.x*a.size.y){1!=d&&(c.error=1);break}0<b&&a.board.c[b-1][e].clues==c.clues+1?b--:b<a.size.x-1&&a.board.c[b+1][e].clues==c.clues+1?b++:0<e&&a.board.c[b][e-1].clues==c.clues+
1?e--:e<a.size.y-1&&a.board.c[b][e+1].clues==c.clues+1&&e++}}catch(h){throw a.exception(h),h;}};a.initValueMarkers2=function(){for(var b=0;b<a.size.x;b++)for(var d=0;d<a.size.y;d++){var e=a.board.c[b][d];if(e.value==nil)for(var c=1;c<=a.size.z;c++)e.markers.set(a.marker.numberBase+c),e.markers.set(a.marker.letterX)}};a.updateValueMarkers2=function(){for(var b=0;b<a.size.x;b++)for(var d=0;d<a.size.y;d++){var e=a.board.c[b][d];if(e.value!=nil){for(var c=0;c<a.size.x;c++)a.board.c[c][d].markers.clear(a.marker.numberBase+
e.value);for(c=0;c<a.size.y;c++)a.board.c[b][c].markers.clear(a.marker.numberBase+e.value)}}};a.valueToString=function(b){try{return b==nil||b==a.cell.nilalias?"-":0==b?"x":b.toString()}catch(d){return ojdebug(d.toString()),"%"}};a.paintCell=function(b){try{var d=a.canvas.getContext("2d");d.fillStyle=a.uic.light[b.color];d.fillRect(b.px,b.py,a.unit.x,a.unit.y);a.paintSymbolMarkers(b);a.paintValueMarkers(b);var e=b.fixed?a.uic.clue:a.uic.text;0==b.value?a.paintCross(b,{color:e}):b.value!=nil&&a.paintText(b.value.toString(),
b,{color:e});1==b.clues&&a.paintCircle(b,{stroke:a.uic.clue});b.error&&a.display.errors&&(b.value==nil?a.paintErrorDot(b):a.paintErrorCircle(b))}catch(c){throw a.exception(c),c;}}}Numbermaze.prototype=new Puzzle;
