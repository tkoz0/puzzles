function Fuzuli(){var a=this;a.constructor();a.uis.puzzle=["Fuzuli"];var f=a.board.c,n=0,h=0,k=0,l=0;zmin=1;zmax=0;a.cell.nilalias=0;a.enable.vmarkers=!0;a.enable.pgrid=!0;a.enable.values=!1;a.enable.currentValue=!1;a.charToValue=a.charToValue.concat(["x",0,",",0,"0",0,"-",nil,"/",nil]);a.valueToMarker=[0,a.marker.letterX];a.init=function(){Object.getPrototypeOf(a).init.call(a)};a.reset2=function(){var b;try{n=a.labels.west;h=a.labels.north;k=a.size.x-a.labels.east;l=a.size.y-a.labels.south;zmax=
a.size.z==nil?k:a.size.z;a.cell.min=1;var e=a.cell.max=zmax;a.keypadValues=a.keypad.numbers.slice(0,e);a.keypadValues[e++]=["\u00d7",0];a.keypadValues[e++]=["\u2022",nil];a.infoText=a.uis.get("numbers")+": 1~"+zmax;a.cell.values=[];e=0;for(b=zmin;b<=zmax;b++)a.cell.values[e++]=b;a.cell.values[e++]=0;a.cell.values[e++]=nil;if(a.level.problem){b=0;var d=a.level.problem.replace(/\s+/g," ").trim().split(" ");for(var c=h;c<l;c++)for(var g=n;g<k;g++){var p=f[g][c];var m=d[b++];p.value="."==m||"-"==m?nil:
"x"==m?0:parseInt(m);p.value!=nil&&(p.fixed=!0)}}if(a.level.solution)for(b=0,d=a.level.solution.replace(/\s+/g," ").trim().split(" "),c=h;c<l;c++)for(g=n;g<k;g++)p=f[g][c],m=d[b++],p.solution="."==m||"-"==m||"0"==m?nil:parseInt(m)}catch(q){throw a.exception(q),q;}};a.check2=function(){try{for(var b=n;b<k;b++){var e=[];for(var d=h;d<l;d++){var c=f[b][d];c.value!=nil&&0!=c.value&&(void 0==e[c.value]?e[c.value]=d:(c.error=3,f[b][e[c.value]].error=3))}for(var g=zmin;g<=zmax;g++)void 0===e[g]&&(a.solved=
!1)}for(d=h;d<l;d++){e=[];for(b=n;b<k;b++)c=f[b][d],c.value!=nil&&0!=c.value&&(void 0===e[c.value]?e[c.value]=b:(c.error=3,f[e[c.value]][d].error=3));for(g=zmin;g<=zmax;g++)void 0===e[g]&&(a.solved=!1)}for(b=n;b<k-1;b++)for(d=h;d<l-1;d++)c=0,f[b][d].value!=nil&&0!=f[b][d].value||c++,f[b+1][d].value!=nil&&0!=f[b+1][d].value||c++,f[b][d+1].value!=nil&&0!=f[b][d+1].value||c++,f[b+1][d+1].value!=nil&&0!=f[b+1][d+1].value||c++,0==c&&(f[b][d].error=f[b+1][d].error=f[b][d+1].error=f[b+1][d+1].error=1)}catch(p){throw a.exception(p),
p;}};a.initValueMarkers2=function(){for(var b=n;b<k;b++)for(var e=h;e<l;e++){var d=f[b][e];if(d.value==nil)for(var c=zmin;c<=zmax;c++)d.markers.set(a.marker.numberBase+c)}};a.updateValueMarkers2=function(){for(var b=h;b<k;b++)for(var e=h;e<l;e++){var d=f[b][e];if(d.value!=nil){for(var c=n;c<k;c++)f[c][e].markers.clear(a.marker.numberBase+d.value);for(c=h;c<l;c++)f[b][c].markers.clear(a.marker.numberBase+d.value)}}};a.valueToString=function(a,e){try{return 0==a?e?"x":"-":Object.getPrototypeOf(this).valueToString.call(this,
a,e)}catch(d){return ojdebug(d.toString()),"%"}};a.paintCell=function(b){try{var e=a.canvas.getContext("2d");e.fillStyle=a.uic.light[b.color];e.fillRect(b.px,b.py,a.unit.x,a.unit.y);a.paintSymbolMarkers(b);a.paintValueMarkers(b);var d=b.fixed?a.uic.clue:a.uic.text;0==b.value?a.paintCross(b,{color:d}):b.value!=nil&&a.paintText(b.value.toString(),b,{color:d});b.error&&a.display.errors&&(b.value==nil?a.paintErrorDot(b):a.paintErrorCircle(b))}catch(c){throw a.exception(c),c;}}}Fuzuli.prototype=new Puzzle;
