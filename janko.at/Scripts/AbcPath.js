function AbcPath(){var a=this;a.constructor();var f=a.board.c,m=0,n=0,l=0,q=0;a.uis.puzzle=["ABC Path","ABC Pfad","ABC Chemin","ABC Sentiero"];var v=[0,1,1,1,0,-1,-1,-1],w=[-1,-1,0,1,1,1,0,-1],u=n=m=1,t;a.enable.dragging=!0;a.keypad.left=a.keypad.pgvalues;a.keypad.right=a.keypad.pgmarkers;a.enable.values=!1;a.enable.vmarkers=!0;a.labels.north=a.labels.south=a.labels.east=a.labels.west=1;a.cell.min=1;a.cell.max=25;a.uic.gray="#bbbbbb";a.init=function(){Object.getPrototypeOf(a).init.call(a)};a.reset2=
function(){var b;try{m=a.labels.west;n=a.labels.north;l=a.size.x-a.labels.east;q=a.size.y-a.labels.south;u=a.cell.min=1;t=a.cell.max=a.size.z=(a.size.x-2)*(a.size.y-2);for(b=u;b<=t;b++)a.charToValue=a.charToValue.concat([String.fromCharCode(b+96),b]);a.charToValue=a.charToValue.concat(["-",nil,"/",nil]);a.valueToMarker=[];var c=0;for(b=u;b<=t;b++)a.valueToMarker[c++]=b,a.valueToMarker[c++]=a.marker.letterBase+b-1;a.valueToMarker[c++]=a.marker.letterX;c=t;a.keypadValues=a.keypad.letters.slice(0,c);
a.keypadValues[c++]=["\u2022",nil];if(a.level.problem){b=0;var d=a.level.problem.replace(/\s+/g," ").trim().split(" ");for(var h=0;h<a.size.y;h++)for(var g=0;g<a.size.x;g++){var k=f[g][h];var e=d[b++];c=nil;"."!=e&&"-"!=e&&(c="a"<=e&&"z">=e?e.charCodeAt(0)-96:"A"<=e&&"Z">=e?e.charCodeAt(0)-64:parseInt(e));0==g||g==a.size.x-1||0==h||h==a.size.y-1?k.label=c:k.value=c;c!=nil&&(k.fixed=!0)}}if(a.level.solution)for(b=0,d=a.level.solution.replace(/\s+/g," ").trim().split(" "),h=n;h<q;h++)for(g=m;g<l;g++)k=
f[g][h],e=d[b++],"."!=e&&"-"!=e&&(k.solution="a"<=e&&"z">=e?e.charCodeAt(0)-96:"A"<=e&&"Z">=e?e.charCodeAt(0)-64:parseInt(e));a.reset2labels()}catch(p){throw a.exception(p),p;}};a.check2=function(){try{for(var b=m;b<l;b++)for(var c=n;c<q;c++)f[b][c].value==nil&&(f[b][c].error=1);for(var d=[],h=[],g=0;g<=a.cell.max;g++)d[g]=h[g]=nil;for(b=m;b<l;b++)for(c=n;c<q;c++){var k=f[b][c];if(k.value!=nil){var e=k.value;d[e]==nil?(d[e]=b,h[e]=c):k.error=f[d[e]][h[e]].error=3}}h=d=1;a:for(;d<a.cell.max;){for(b=
m;b<l;b++)for(c=n;c<q;c++)if(f[b][c].value==d)for(k=b,e=c,d++;d<=a.cell.max;){g=0;b:for(;8>g;g++){var p=k+v[g],r=e+w[g];if(p>=m&&p<l&&r>=n&&r<q&&f[p][r].value==d){f[k][e].count=f[p][r].count=h;k=p;e=r;d++;break b}}if(8==g){a.solved=!1;b==k&&c==e||h++;continue a}}d++}(function(){for(var b=m;b<l;b++){for(var c=f[b][0].label,d=f[b][a.size.y-1].label,e=n;e<q;e++)f[b][e].value==c&&(c=nil),f[b][e].value==d&&(d=nil);c!=nil&&(f[b][0].error=2);d!=nil&&(f[b][a.size.y-1].error=2)}})();(function(){for(var b=
n;b<q;b++){for(var c=f[0][b].label,d=f[a.size.x-1][b].label,e=m;e<l;e++)f[e][b].value==c&&(c=nil),f[e][b].value==d&&(d=nil);c!=nil&&(f[0][b].error=2);d!=nil&&(f[a.size.x-1][b].error=2)}})();(function(){for(var b=f[0][0].label,c=f[a.size.x-1][a.size.y-1].label,d=m;d<l;d++)f[d][d].value==b&&(b=nil),f[d][d].value==c&&(c=nil);b!=nil&&(f[0][0].error=2);c!=nil&&(f[a.size.x-1][a.size.y-1].error=2)})();(function(){for(var b=f[0][a.size.y-1].label,c=f[a.size.x-1][0].label,d=m;d<l;d++)f[d][l-d].value==b&&(b=
nil),f[d][l-d].value==c&&(c=nil);b!=nil&&(f[0][a.size.y-1].error=2);c!=nil&&(f[a.size.x-1][0].error=2)})()}catch(x){throw a.exception(x),x;}};a.dragTo2=function(b,c){try{b.fixed?a.moveTo(b):c.value==nil||c.value==a.cell.max?a.makeMove(b,nil):a.makeMove(b,c.value+1)}catch(d){throw a.exception(d),d;}};a.dragTo2Alt=function(b,c){try{b.fixed?a.moveTo(b):c.value==nil||1==c.value?a.makeMove(b,nil):a.makeMove(b,c.value-1)}catch(d){throw a.exception(d),d;}};a.valueToString=function(a,c){try{switch(a){case nil:return"-";
default:return String.fromCharCode(a+96)}}catch(d){return ojdebug(d.toString()),"%"}};a.labelToString=function(b,c){try{return a.valueToString(b,c)}catch(d){return ojdebug(d.toString()),"%"}};a.paintDone=function(){try{for(var b=a.canvas.getContext("2d"),c=0;c<a.size.x;c++)for(var d=0;d<a.size.y;d++){var h=f[c][d];if(h.value!=nil)for(var g=0;8>g;g++){var k=c+v[g],e=d+w[g];if(k>=m&&k<l&&e>=n&&e<q&&f[k][e].value==h.value+1){b.lineWidth=Math.floor(a.unit.x/6);var p=(h.count-1)%10;b.strokeStyle=0==p?
a.uic.gray:a.uic.light[p];b.beginPath();b.moveTo(h.px+a.unit.x/2,h.py+a.unit.y/2);b.lineTo(f[k][e].px+a.unit.x/2,f[k][e].py+a.unit.y/2);b.stroke()}}}for(c=m;c<l;c++)for(d=n;d<q;d++)a.paintValueCell2nd(f[c][d]);a.paintCursor()}catch(r){throw a.exception(r),r;}};a.paintCell=function(b){try{b.areas==a.cell.label?a.paintLabelCell(b):a.paintValueCell(b)}catch(c){throw a.exception(c),c;}};a.paintLabelCell=function(b){try{var c=a.canvas.getContext("2d");c.fillStyle=a.uic.label;c.fillRect(b.px,b.py,a.unit.x,
a.unit.y);b.label!=nil&&a.paintText(String.fromCharCode(b.label+64),b);b.error&&a.display.errors&&(b.label==nil?a.paintErrorDot(b):a.paintErrorCircle(b))}catch(d){throw a.exception(d),d;}};a.paintValueCell=function(b){try{var c=a.canvas.getContext("2d");c.fillStyle=a.uic.light[b.color];c.fillRect(b.px,b.py,a.unit.x,a.unit.y)}catch(d){throw a.exception(d),d;}};a.paintValueCell2nd=function(b){try{a.canvas.getContext("2d"),b.value!=nil&&a.paintText(String.fromCharCode(b.value+64),b,{color:b.fixed?a.uic.clue:
a.uic.text}),a.paintSymbolMarkers(b),a.paintValueMarkers(b),b.error&&a.display.errors&&(b.value==nil?a.paintErrorDot(b):a.paintErrorCircle(b))}catch(c){throw a.exception(c),c;}}}AbcPath.prototype=new Puzzle;
