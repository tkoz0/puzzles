function Mosaik(){var a=this;a.constructor();a.uis.puzzle=["Mosaic","Mosaik"];var g=a.board.c,h=0,k=0,n=nil,p=[0,0,1,1,1,0,-1,-1,-1],q=[0,-1,-1,0,1,1,1,0,-1];a.charToValue=a.charToValue.concat(["a",0,"s",1,"d",nil,"x",0,"c",1,"v",nil,",",0,".",1,"-",nil,"/",nil]);a.cell.values=[0,1,n];a.enable.dragging=!0;a.keypad.left=nil;a.enable.pgrid=!0;a.cell.nilalias=1;a.init=function(){Object.getPrototypeOf(a).init.call(a)};a.reset2=function(){try{h=a.size.x;k=a.size.y;if(a.level.problem){var b=0;var d=a.level.problem.replace(/\s+/g,
" ").trim().split(" ");for(var c=0;c<k;c++)for(var e=0;e<h;e++){var f=g[e][c];var l=d[b++];"."!=l&&"-"!=l&&("x"==l?f.value=0:"o"==l?f.value=1:f.label=parseInt(l));f.value!=nil&&(f.fixed=!0)}}if(a.level.solution)for(b=0,d=a.level.solution.replace(/\s+/g," ").trim().split(" "),c=0;c<k;c++)for(e=0;e<h;e++)f=g[e][c],l=d[b++],f.solution="x"==l?0:1}catch(m){throw a.exception(m),m;}};a.check2=function(){try{for(var b=0;b<h;b++)for(var d=0;d<k;d++)if(g[b][d].label!=nil){for(var c=0,e=0;e<p.length;e++){var f=
b+p[e],l=d+q[e];0<=f&&f<h&&0<=l&&l<k&&0==g[f][l].value&&c++}c!=g[b][d].label&&(g[b][d].error=2)}}catch(m){throw a.exception(m),m;}};a.solve2=function(){try{for(var b=0;b<h;b++)for(var d=0;d<k;d++)if(0==g[b][d].label)for(var c=b-1;c<=b+1;c++)for(var e=d-1;e<=d+1;e++)0<=c&&c<h&&0<=e&&e<k&&(g[c][e].value=1);else if(9==g[b][d].label)for(c=b-1;c<=b+1;c++)for(e=d-1;e<=d+1;e++)0<=c&&c<h&&0<=e&&e<k&&(g[c][e].value=0);else if(6==g[b][d].label&&(0==b||b==h-1||0==d||d==k-1))for(c=b-1;c<=b+1;c++)for(e=d-1;e<=
d+1;e++)0<=c&&c<h&&0<=e&&e<k&&(g[c][e].value=0)}catch(f){throw a.exception(f),f;}};a.cleanSolution=function(){for(var a=0;a<h;a++)for(var d=0;d<k;d++){var c=g[a][d];c.value==nil&&(c.value=1)}};a.valueToString=function(a,d){switch(a){case nil:return"-";case 0:return"x";case 1:return d?".":"-";default:return"%"}};a.paintCell=function(b){try{var d=a.canvas.getContext("2d");d.fillStyle=b.value==nil?a.paintToImage&&a.moves.current==nil?a.uic.white:a.uic.gray:0==b.value?a.uic.dark[b.color]:a.uic.light[b.color];
d.fillRect(b.px,b.py,a.unit.x,a.unit.y);b.label!=nil&&a.paintText(b.label.toString(),b,{color:0!=b.value?a.uic.text:a.uic.text2});a.paintSymbolMarkers(b);b.error&&a.display.errors&&a.paintErrorCircle(b)}catch(c){throw a.exception(c),c;}};a.paintCurrentValue=function(){try{var b=a.uie.value,d=b.getContext("2d");d.fillStyle=a.current.value==n?a.uic.gray:0==a.current.value?a.uic.black:a.uic.white;d.fillRect(0,0,b.width,b.height)}catch(c){throw a.exception(c),c;}}}Mosaik.prototype=new Puzzle;
