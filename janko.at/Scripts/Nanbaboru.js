function Nanbaboru(){var a=this;a.constructor();a.uis.puzzle=["Nanbaboru"];var g=nil-1;a.cell.nilalias=0;a.enable.vmarkers=!0;a.enable.pgrid=!0;a.enable.values=!1;a.enable.currentValue=!1;a.charToValue=a.charToValue.concat(["a",g,"s",0,"d",nil,".",g,",",0,"-",nil,"o",g,"x",0,"/",nil,"0",0]);a.valueToMarker=[0,a.marker.letterX];a.init=function(){Object.getPrototypeOf(a).init.call(a)};a.reset2=function(){var b;try{a.size.z==nil&&(a.size.z=9);a.cell.min=1;a.cell.max=a.size.z;a.infoText=a.uis.get("numbers")+
": 1~"+a.size.z;a.cell.values=[];var d=0;for(b=1;b<=a.size.z;b++)a.cell.values[d++]=b;a.cell.values[d++]=0;a.cell.values[d++]=g;a.cell.values[d++]=nil;d=a.size.z;a.keypadValues=a.keypad.numbers.slice(0,d);a.keypadValues[d++]=["O",g];a.keypadValues[d++]=["\u00d7",0];a.keypadValues[d++]=["\u2022",nil];if(a.level.problem){b=0;var e=a.level.problem.replace(/\s+/g," ").trim().split(" ");for(var c=0;c<a.size.y;c++)for(var f=0;f<a.size.x;f++){var k=a.board.c[f][c];var h=e[b++];"."==h||"-"==h?k.value=nil:
"o"==h||"0"==h?k.label=g:k.value="x"==h?0:parseInt(h);k.value!=nil&&(k.fixed=!0)}}if(a.level.solution)for(b=0,e=a.level.solution.replace(/\s+/g," ").trim().split(" "),c=0;c<a.size.y;c++)for(f=0;f<a.size.x;f++)k=a.board.c[f][c],h=e[b++],k.solution="."==h||"-"==h||"0"==h?nil:parseInt(h)}catch(l){throw a.exception(l),l;}};a.check2=function(){try{for(var b=0;b<a.size.x;b++){var d=[];for(var e=0;e<a.size.y;e++){var c=a.board.c[b][e];c.value!=nil&&0!=c.value&&(c.value==g?c.error=1:void 0==d[c.value]?d[c.value]=
e:(c.error=3,a.board.c[b][d[c.value]].error=3))}for(var f=1;f<=a.size.z;f++)void 0===d[f]&&(a.solved=!1)}for(e=0;e<a.size.y;e++){d=[];for(b=0;b<a.size.x;b++)c=a.board.c[b][e],c.value!=nil&&0!=c.value&&(c.value==g?c.error=1:void 0===d[c.value]?d[c.value]=b:(c.error=3,a.board.c[d[c.value]][e].error=3));for(f=1;f<=a.size.z;f++)void 0===d[f]&&(a.solved=!1)}for(b=0;b<a.size.x;b++)for(e=0;e<a.size.y;e++)c=a.board.c[b][e],c.label==g&&1>c.value&&(c.error=1)}catch(k){throw a.exception(k),k;}};a.initValueMarkers2=
function(){for(var b=0;b<a.size.x;b++)for(var d=0;d<a.size.y;d++){var e=a.board.c[b][d];if(e.value==nil||e.value==g)for(var c=1;c<=a.size.z;c++)e.markers.set(a.marker.numberBase+c),e.label==nil&&e.markers.set(a.marker.letterX)}};a.updateValueMarkers2=function(){for(var b=0;b<a.size.x;b++)for(var d=0;d<a.size.y;d++){var e=a.board.c[b][d];if(e.value!=nil&&e.value!=g){for(var c=0;c<a.size.x;c++)a.board.c[c][d].markers.clear(a.marker.numberBase+e.value);for(c=0;c<a.size.y;c++)a.board.c[b][c].markers.clear(a.marker.numberBase+
e.value)}}};a.paintCell=function(b){try{var d=a.canvas.getContext("2d");d.fillStyle=a.uic.light[b.color];d.fillRect(b.px,b.py,a.unit.x,a.unit.y);a.paintSymbolMarkers(b);a.paintValueMarkers(b);b.label==g&&a.paintCircle(b,{stroke:a.uic.clue});var e=b.fixed?a.uic.clue:a.uic.text;b.value==g?a.paintCircle(b,{stroke:e}):0==b.value?a.paintCross(b,{color:e}):b.value!=nil&&a.paintText(b.value.toString(),b,{color:e});b.error&&a.display.errors&&(b.value==nil?a.paintErrorDot(b):a.paintErrorCircle(b))}catch(c){throw a.exception(c),
c;}};a.paintCurrentValue=function(){try{var b=a.uie.value,d=b.getContext("2d");d.fillStyle=a.uic.white;d.fillRect(0,0,b.width,b.height);a.current.value==g?a.paintCircle(d,{x:0,y:0,w:b.width,h:b.height,fill:a.uic.white,stroke:a.uic.black}):0==a.current.value?a.paintCross(d,{x:0,y:0,w:b.width,h:b.height,width:2,color:a.uic.black}):a.current.value!=nil&&a.paintText(a.current.value,d,{x:0,y:0,w:b.width,h:b.height})}catch(e){throw a.exception(e),e;}}}Nanbaboru.prototype=new Puzzle;
