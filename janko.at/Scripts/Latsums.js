function Latsums(){var a=this;a.constructor();a.uis.puzzle=["Latin Sums","Lateinische Summen"];var f=a.board.c,l=0,m=0,p=[-1,-1,-1,0,1,1,1,0],q=[-1,0,1,-1,-1,0,1,1];a.enable.vmarkers=!0;a.enable.pgrid=!0;a.enable.values=!1;a.enable.currentValue=!1;a.charToValue=a.charToValue.concat(["0",nil,"-",nil,"/",nil]);a.init=function(){Object.getPrototypeOf(a).init.call(a)};a.reset2=function(){var b;try{l=a.size.x-a.labels.east;m=a.size.y-a.labels.south;a.cell.min=1;a.cell.max=a.size.z;a.cell.values=[];var d=
0;for(b=1;b<=a.size.z;b++)a.cell.values[d++]=b;a.cell.values[d++]=nil;d=a.size.z;a.keypadValues=a.keypad.numbers.slice(0,d);a.keypadValues[d++]=["\u2022",nil];if(a.level.problem){b=0;var e=a.level.problem.replace(/\s+/g," ").trim().split(" ");for(var c=0;c<m;c++)for(var g=0;g<l;g++){var k=f[g][c];var h=e[b++];"."==h||"-"==h?k.value=nil:(k.label=parseInt(h),k.fixed=!0)}}if(a.level.solution)for(b=0,e=a.level.solution.replace(/\s+/g," ").trim().split(" "),c=0;c<m;c++)for(g=0;g<l;g++)k=f[g][c],h=e[b++],
k.solution="."==h||"-"==h||k.fixed?nil:parseInt(h)}catch(n){throw a.exception(n),n;}};a.check2=function(){try{for(var b=0;b<m;b++){var d=[];for(var e=0;e<l;e++){var c=f[e][b];c.label==nil&&(c.value==nil?c.error=1:void 0===d[c.value]?d[c.value]=e:(c.error=5,f[d[c.value]][b].error=5))}}for(e=0;e<l;e++)for(d=[],b=0;b<m;b++)c=f[e][b],c.label==nil&&(c.value==nil?c.error=1:void 0===d[c.value]?d[c.value]=b:(c.error=5,f[e][d[c.value]].error=5));for(e=0;e<l;e++)for(b=0;b<m;b++)if(c=f[e][b],c.label!=nil){for(var g=
d=0;8>g;g++){var k=e+p[g],h=b+q[g];0<=k&&k<l&&0<=h&&h<m&&!f[k][h].fixed&&(d+=f[k][h].value)}c.label!=d&&(c.error=2)}}catch(n){throw a.exception(n),n;}};a.initValueMarkers2=function(){for(var b=0;b<l;b++)for(var d=0;d<m;d++){var e=f[b][d];if(e.value==nil)for(var c=1;c<=a.size.z;c++)e.markers.set(a.marker.numberBase+c)}};a.updateValueMarkers2=function(){for(var b=0;b<l;b++)for(var d=0;d<m;d++){var e=f[b][d];if(e.value!=nil){for(var c=0;c<l;c++)f[c][d].markers.clear(a.marker.numberBase+e.value);for(c=
0;c<m;c++)f[b][c].markers.clear(a.marker.numberBase+e.value)}}};a.paintCell=function(b){try{var d=a.canvas.getContext("2d");d.fillStyle=a.uic.light[b.color];d.fillRect(b.px,b.py,a.unit.x,a.unit.y);a.paintSymbolMarkers(b);a.paintValueMarkers(b);b.label!=nil&&a.paintText(b.label.toString(),b,{color:a.uic.clue});b.value!=nil&&a.paintText(b.value.toString(),b);b.error&&a.display.errors&&(b.value==nil?a.paintErrorDot(b):a.paintErrorCircle(b))}catch(e){throw a.exception(e),e;}}}Latsums.prototype=new Puzzle;
