function Yakuso(){var a=this;a.constructor();a.uis.puzzle=["Yakuso"];a.enable.vmarkers=!0;a.enable.pgrid=!0;a.enable.values=!1;a.enable.currentValue=!1;a.labels.south=1;a.charToValue=a.charToValue.concat(["-",nil,"/",nil]);a.setup2=function(){try{a.size.y=a.size.z=a.size.y-1}catch(b){throw a.exception(b),b;}};a.init=function(){Object.getPrototypeOf(a).init.call(a)};a.reset2=function(){var b;try{a.cell.min=0;a.cell.max=a.size.z;a.cell.values=[];var d=0;for(b=0;b<=a.size.z;b++)a.cell.values[d++]=b;
a.cell.values[d++]=nil;d=0;a.keypadValues=[];for(var c=0;c<=a.size.z;c++)a.keypadValues[d++]=[c.toString(),c];a.keypadValues[d++]=["\u2022",nil];a.infoText=a.uis.get("numbers")+": 1~"+a.size.z.toString();if(a.level.problem){b=0;var e=a.level.problem.replace(/\s+/g," ").trim().split(" ");for(var f=0;f<a.size.y;f++)for(var g=0;g<a.size.x;g++){var k=a.board.c[g][f];var h=e[b++];"."==h||"-"==h?k.value=nil:f==a.size.y-1?(k.label=parseInt(h),k.valid=!1):(k.value=parseInt(h),k.fixed=!0)}}if(a.level.solution)for(b=
0,e=a.level.solution.replace(/\s+/g," ").trim().split(" "),f=0;f<a.size.y-1;f++)for(g=0;g<a.size.x;g++)k=a.board.c[g][f],h=e[b++],k.solution="."==h||"-"==h?nil:parseInt(h)}catch(l){throw a.exception(l),l;}};a.check2=function(){try{for(var b=[],d=[],c=0;c<a.size.y-1;c++){for(var e=0;e<a.size.x;e++){var f=a.board.c[e][c];0!=f.value&&(f.value==nil?a.board.c[e][c].error=1:(d[f.value]?d[f.value]++:d[f.value]=1,b[c])?b[c]!=f.value&&(a.solved=!1):b[c]=f.value)}if(d[b[c]]!=b[c])for(e=0;e<a.size.x;e++)0!=
a.board.c[e][c].value&&(a.board.c[e][c].error=3)}for(b=1;b<=a.size.z;b++)d[b]&&0!=d[b]||(a.solved=!1);for(e=0;e<a.size.x;e++)if(a.board.c[e][a.size.y-1].label!=nil){for(c=d=0;c<a.size.y-1;c++)d+=a.board.c[e][c].value;d!=a.board.c[e][a.size.y-1].label&&(a.board.c[e][a.size.y-1].error=2)}}catch(g){throw a.exception(g),g;}};a.paintCell=function(b){try{b.y==a.size.y-1?a.paintLabelCell(b):a.paintValueCell(b)}catch(d){throw a.exception(d),d;}};a.paintLabelCell=function(b){try{var d=a.canvas.getContext("2d");
d.fillStyle=a.uic.label;d.fillRect(b.px,b.py,a.unit.x,a.unit.y);b.label!=nil&&a.paintText(b.label.toString(),b);b.error&&a.display.errors&&a.paintErrorCircle(b)}catch(c){throw a.exception(c),c;}};a.paintValueCell=function(b){try{var d=a.canvas.getContext("2d");d.fillStyle=a.uic.light[b.color];d.fillRect(b.px,b.py,a.unit.x,a.unit.y);a.paintSymbolMarkers(b);a.paintValueMarkers(b);b.value!=nil&&a.paintText(b.value.toString(),b,{color:b.fixed?a.uic.clue:a.uic.text});b.error&&a.display.errors&&(b.value==
nil?a.paintErrorDot(b):a.paintErrorCircle(b))}catch(c){throw a.exception(c),c;}}}Yakuso.prototype=new Puzzle;
