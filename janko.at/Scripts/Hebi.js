function Hebi(){var a=this;a.constructor();a.uis.puzzle=["Hebi-Ichigo"];var h=a.board.c,p=0,q=0,l=0,m=0;zmin=1;zmax=5;var w=[1,0,-1,0],x=[0,1,0,-1];a.enable.vmarkers=!0;a.enable.pgrid=!0;a.enable.values=!1;a.enable.currentValue=!1;a.cell.min=zmin;a.cell.max=zmax;a.cell.nilalias=0;a.valueToMarker=[0,a.marker.letterX];a.cell.values=[0,1,2,3,4,5,nil];a.charToValue=a.charToValue.concat(["x",0,"0",0,",",0,"/",nil,"-",nil]);a.keypadValues=a.keypad.numbers.slice(0,5);a.keypadValues[5]=["\u00d7",0];a.keypadValues[6]=
["\u2022",nil];a.init=function(){Object.getPrototypeOf(a).init.call(a)};a.reset2=function(){try{p=a.labels.west;q=a.labels.north;l=a.size.x-a.labels.east;m=a.size.y-a.labels.south;zmin=1;zmax=5;if(a.level.problem){var b=0;var g=a.level.problem.replace(/\s+/g," ").trim().split(" ");for(var e=q;e<m;e++)for(var d=p;d<l;d++){var c=h[d][e];var f=g[b++];if("."==f||"-"==f)c.label=nil;else if("x"==f)c.label=-2;else{var n=parseInt(f.substr(0,f.length-1)),k=f.substr(f.length-1);c.label=parseInt(n);"n"==k?c.clues=
8:"s"==k?c.clues=2:"e"==k?c.clues=1:"w"==k?c.clues=4:c.label=parseInt(f)}c.label!=nil&&(c.fixed=!0)}}if(a.level.fixed)for(b=0,g=a.level.problem.replace(/\s+/g," ").trim().split(" "),e=q;e<m;e++)for(d=p;d<l;d++)c=h[d][e],f=g[b++],c.fixed="."==f||"-"==f?!1:!0;if(a.level.solution)for(b=0,g=a.level.solution.replace(/\s+/g," ").trim().split(" "),e=q;e<m;e++)for(d=p;d<l;d++)c=h[d][e],f=g[b++],c.solution="-"==f||"."==f?nil:parseInt(f)}catch(r){throw a.exception(r),r;}};a.check2=function(){var b,g;try{for(var e=
p;e<l;e++)for(var d=q;d<m;d++){var c=h[e][d];if(c.label>nil){var f=g=0;2==c.clues&&(f=1);8==c.clues&&(f=-1);1==c.clues&&(g=1);4==c.clues&&(g=-1);for(b=c;;){var n=b.x+g;var k=b.y+f;if(n<p||n>=l||k<q||k>=m)0!=c.label&&(c.error=1);else{b=h[n][k];if(b.label!=nil){0!=c.label&&(c.error=1);break}if(b.value==nil||0==b.value)continue;b.value!=c.label&&(c.error=1)}break}}}var r=0;for(e=p;e<l;e++)for(d=q;d<m;d++)if(c=h[e][d],1==c.value){r++;c.count=r;for(var u=0;4>u;u++){for(var t=0;4>t&&(n=c.x+w[t],k=c.y+x[t],
n<p||n>=l||k<q||k>=m||(b=h[n][k],0!=b.count||b.value!=c.value+1));t++);if(4>t)c=b,c.count=r;else{c.error=3;break}}}for(e=p;e<l;e++)for(d=q;d<m;d++)c=h[e][d],c.value!=nil&&0!=c.value&&0==c.count&&(c.error=3);for(e=p;e<l;e++)for(d=q;d<m;d++)c=h[e][d],0!=c.count&&(e<l-1&&(b=h[e+1][d],0!=b.count&&b.count!=c.count&&(b.error=c.error=4)),d<m-1&&(b=h[e][d+1],0!=b.count&&b.count!=c.count&&(b.error=c.error=4)));for(e=p;e<l;e++)for(d=q;d<m;d++)if(c=h[e][d],1==c.value){f=g=0;0<e&&2==h[e-1][d].value&&(g=1);e<
l-1&&2==h[e+1][d].value&&(g=-1);0<d&&2==h[e][d-1].value&&(f=1);d<m-1&&2==h[e][d+1].value&&(f=-1);if(0==g&&0==f)break;for(b=c;;){n=b.x+g;k=b.y+f;if(n<p||n>=l||k<q||k>=m)break;b=h[n][k];if(b.label!=nil)break;if(b.value!=nil&&0!=b.value){b.error=c.error=2;break}}}}catch(v){throw a.exception(v),v;}};a.paintCell=function(b){try{var g=a.canvas.getContext("2d");g.fillStyle=b.label==nil?a.uic.light[b.color]:b.error&&a.display.errors?a.uic.error:a.uic.black;g.fillRect(b.px,b.py,a.unit.x,a.unit.y);if(b.label>
nil){var e=parseInt(b.label);a.paintText(e,b,{x:b.px,w:8==b.clues||2==b.clues?5*a.unit.x/6:a.unit.x,y:1==b.clues||4==b.clues?b.py+a.unit.y/6:b.py,h:a.unit.y,color:a.uic.white,scale:60});a.paintArrow(b,{arrow:b.clues,shift:!0,fill:a.uic.white,stroke:a.uic.white})}a.paintSymbolMarkers(b);a.paintValueMarkers(b);var d=b.fixed?a.uic.clue:a.uic.text;0==b.value?a.paintCross(b,{color:d}):b.value!=nil&&a.paintText(b.value.toString(),b,{color:d});b.error&&a.display.errors&&b.label==nil&&(b.valie==nil?a.paintErrorDot(b):
a.paintErrorCircle(b))}catch(c){throw a.exception(c),c;}}}Hebi.prototype=new Puzzle;
