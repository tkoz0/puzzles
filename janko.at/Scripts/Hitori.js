function Hitori(){var a=this;a.constructor();a.uis.puzzle=["Hitori"];var f=a.board.c,k=0,l=0,g=0,h=0,p=nil;a.charToValue=a.charToValue.concat(["a",0,"s",1,"d",nil,"x",0,"c",1,"v",nil,",",0,".",1,"-",nil,"/",nil]);a.cell.values=[0,1,p];a.enable.dragging=!0;a.enable.pgrid=!0;a.keypad.left=nil;a.cell.nilalias=1;a.init=function(){Object.getPrototypeOf(a).init.call(a)};a.reset2=function(){try{k=a.labels.west;l=a.labels.north;g=a.size.x-a.labels.east;h=a.size.y-a.labels.south;if(a.level.problem){var b=
0;var d=a.level.problem.replace(/\s+/g," ").trim().split(" ");for(var c=l;c<h;c++)for(var e=k;e<g;e++){var m=f[e][c];var n=d[b++];"."==n||"-"==n?m.label=nil:"x"==n?m.value=0:"o"==n?m.value=1:m.label=parseInt(n)}}if(a.level.solution)for(b=0,d=a.level.solution.replace(/\s+/g," ").trim().split(" "),c=l;c<h;c++)for(e=k;e<g;e++)m=f[e][c],n=d[b++],m.solution="x"==n?0:1}catch(q){throw a.exception(q),q;}};a.check2=function(){try{for(var b=l;b<h;b++){var d=[];for(var c=k;c<g*h;c++)d[c]=nil;for(c=k;c<g;c++){var e=
f[c][b];e.label!=p&&0!=e.value&&(d[e.label]==nil?d[e.label]=c:e.error=f[d[e.label]][b].error=2)}}for(c=k;c<g;c++){d=[];for(b=l;b<g*h;b++)d[b]=nil;for(b=l;b<h;b++)e=f[c][b],e.label!=p&&0!=e.value&&(d[e.label]==nil?d[e.label]=b:e.error=f[c][d[e.label]].error=2)}for(c=k;c<g;c++)for(b=l;b<h;b++)0==f[c][b].value&&(c<g-1&&0==f[c+1][b].value&&(f[c][b].error=f[c+1][b].error=3),b<h-1&&0==f[c][b+1].value&&(f[c][b].error=f[c][b+1].error=3));d=1;for(c=k;c<g;c++)for(b=l;b<h;b++)e=f[c][b],0!=e.value&&0==e.count&&
a.markArea(e,d++);2!=d&&(a.solved=!1)}catch(m){throw a.exception(m),m;}};a.cleanSolution=function(){for(var a=k;a<g;a++)for(var d=l;d<h;d++){var c=f[a][d];c.value==nil&&(c.value=1)}};a.valueToString=function(a,d){switch(a){case nil:return"-";case 0:return"x";case 1:return d?".":"-";default:return"%"}};a.paintCell=function(b){try{var d=a.canvas.getContext("2d");d.fillStyle=0==b.value?a.uic.dark[b.color]:!a.solved&&a.display.errors?a.uic.light[(b.count-1)%10]:b.value==nil?a.paintToImage&&a.moves.current==
nil?a.uic.white:a.uic.gray:a.uic.light[b.color];d.fillRect(b.px,b.py,a.unit.x,a.unit.y);b.label!=nil&&a.paintText(b.label.toString(),b,{color:0!=b.value?a.uic.text:a.uic.text2});a.paintSymbolMarkers(b);b.error&&a.display.errors&&a.paintErrorCircle(b)}catch(c){throw a.exception(c),c;}};a.paintCurrentValue=function(){try{var b=a.uie.value,d=b.getContext("2d");d.fillStyle=a.current.value==p?a.uic.gray:0==a.current.value?a.uic.black:a.uic.white;d.fillRect(0,0,b.width,b.height)}catch(c){throw a.exception(c),
c;}}}Hitori.prototype=new Puzzle;
