var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,d,l){a!=Array.prototype&&a!=Object.prototype&&(a[d]=l.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(d){return $jscomp.SYMBOL_PREFIX+(d||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var d=0;return $jscomp.iteratorPrototype(function(){return d<a.length?{done:!1,value:a[d++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,d){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var l=0,m={next:function(){if(l<a.length){var n=l++;return{value:d(n,a[n]),done:!1}}m.next=function(){return{done:!0,value:void 0}};return m.next()}};m[Symbol.iterator]=function(){return m};return m};
$jscomp.polyfill=function(a,d,l,m){if(d){l=$jscomp.global;a=a.split(".");for(m=0;m<a.length-1;m++){var n=a[m];n in l||(l[n]={});l=l[n]}a=a[a.length-1];m=l[a];d=d(m);d!=m&&null!=d&&$jscomp.defineProperty(l,a,{configurable:!0,writable:!0,value:d})}};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
function SlidingBlocks(){var a=this;a.constructor();a.uis.puzzle=["Sliding Blocks","Schiebepuzzles"];var d=a.board.c,l=0,m=0,n=null,v=nil,q=null;a.enable.dragging=!0;a.enable.hint=!1;a.enable.check=!1;a.enable.colors=!1;a.enable.smarkers=!1;a.enable.values=!1;a.enable.pgridlines=!1;a.keypad.left=nil;a.keypad.right=nil;a.moves.collapse=!1;a.score.label=a.uis.get("moves");a.score.optimize=a.score.minimize;a.solutionToString=a.solutionToStringGame;a.showSolution=a.showSolutionGame;a.isNewSolution=a.isNewSolutionGame;
a.keys=a.keys.concat(["target","colors","equivalence","shade"]);a.keys=a.keys.concat(["steps"]);a.infoText="\u2022";a.uic.target="#ff0000";a.uic.cursor="#ff0000";a.uic.wall="#333333";a.uic.gate="#33cc33";a.uic.tiles=[];a.uic.tilesInit=["#9999c0","#cc9999"];a.uic.cars=["#cc9999","#9999c0","#99cc99","#cccc99"];a.uic.goal="#ff0000";a.uim.grid=0;a.init=function(){Object.getPrototypeOf(a).init.call(a)};a.reset2=function(){try{var b=function(a){a=parseInt(a).toString(16);return 1==a.length?"0"+a:a};a.uis.puzzle=
"cars"==a.level.variant?["Sliding Blocks","Schiebepuzzles"]:["Traffic Jam","Verkehrsstau"];l=a.size.x;m=a.size.y;a.uic.tiles=[].concat(a.uic.tilesInit);n=null;v=nil;q=null;if(a.level.problem){var k=0;var e=a.level.problem.replace(/\s+/g," ").trim().split(" ");for(var c=0;c<m;c++)for(var g=0;g<l;g++){var f=d[g][c];var h=e[k++];"-"!=h&&("@"==h?(f.areas=a.cell.outside,f.value=-2,f.valid=!1):"#"==h?f.value=-2:"x"==h?f.value=0:(f.value=parseInt(h),f.clues=15))}}if(a.level.target)for(k=0,e=a.level.target.replace(/\s+/g,
" ").trim().split(" "),c=0;c<m;c++)for(g=0;g<l;g++)f=d[g][c],h=e[k++],"-"!=h&&(f.solution=parseInt(h));else if("cars"==a.level.variant)for(c=0;c<m;c++)for(g=0;g<l;g++)if(1==d[g][c].value){d[l-1][c].solution=d[l-2][c].solution=1;break}if(a.level.labels)for(k=0,e=a.level.labels.replace(/\s+/g," ").trim().split(" "),c=0;c<m;c++)for(g=0;g<l;g++)f=d[g][c],h=e[k++],"-"!=h&&(f.label=parseInt(h),isNaN(f.label)&&(f.label=100+h.charCodeAt(0)));if(a.level.colors)for(e=a.level.colors.split("\n"),k=0;k<e.length;k++){var p=
e[k].replace(/\s+/g," ").trim().split(" ");2==p.length?a.uic.tiles[parseInt(p[0])]=p[1]:4==p.length&&(a.uic.tiles[parseInt(p[0])]="#"+b(p[1])+b(p[2])+b(p[3]))}if(a.level.equivalence)for(q=[],e=a.level.equivalence.split("\n"),h=0;h<e.length;h++)for(p=e[h].replace(/\s+/g," ").trim().split(" "),q[h]=[],f=0;f<p.length;f++)q[h][f]=parseInt(p[f]);a.level.solution?a.level.moves=a.level.solution:a.level.moves&&(a.level.solution=a.level.moves);if("cars"==a.level.variant){for(g=0;g<l;g++)for(c=0;c<m;c++)d[g][c].clues=
0;for(g=0;g<l;g++)for(c=0;c<m;c++)d[g][c].value!=nil&&(g<l-1&&d[g+1][c].value==d[g][c].value&&(d[g][c].clues|=5,d[g+1][c].clues|=5),c<m-1&&d[g][c+1].value==d[g][c].value&&(d[g][c].clues|=10,d[g][c+1].clues|=10))}}catch(u){throw a.exception(u),u;}};a.check2=function(){try{for(var b=0;b<l;b++)for(var k=0;k<m;k++){var e=d[b][k];if(e.solution!=nil){var c=!1;if(e.solution==e.value)c=!0;else if(null!=q)for(var g=0;g<q.length;g++)q[g].contains(e.value)&&q[g].contains(e.solution)&&(c=!0);if(!c){a.solved=
!1;return}}}}catch(f){throw a.exception(f),f;}};a.movesToString=function(){try{for(var b="",d="",e=0;e<a.moves.current+1;e++){var c=a.moves.list[e].split(",");d+=parseInt(c[3]-1E3).toString()+"-";d+=(parseInt(c[2])*l+parseInt(c[1])).toString()+",";if(50<d.length||e==a.moves.current)b+=d+"\n",d=""}return b}catch(g){throw a.exception(g),g;}};a.movesFromString=function(b){try{a.checking.disable++;a.reset();a.moves.current=-1;a.moves.last=-1;b=b.replace(/[\s,;]+/g," ").trim();for(var k=b.split(" "),e=
0;e<k.length;e++){var c=k[e].split("-"),g=parseInt(c[0]),f=parseInt(c[1]);a.makeMove(d[f%l][Math.floor(f/l)],g+1E3,0)}}catch(h){ojdebug("Movelist: "+e+"\n",b),a.exception(h)}finally{a.checking.disable--}};a.dragStart=function(b,d,e){try{n=d,Object.getPrototypeOf(this).dragStart.call(this,b,d,e)}catch(c){throw a.exception(c),c;}};a.dragEnd=function(){try{n=null,Object.getPrototypeOf(this).dragEnd.call(this)}catch(b){throw a.exception(b),b;}};a.makeMove2=function(b,k,e){try{if(1E3<=k&&(e=k-1E3,n=d[e%
l][Math.floor(e/l)]),n){k=n.value;var c=e=0;n.x==b.x&&(c=b.y-n.y);n.y==b.y&&(e=b.x-n.x);if(0!=e&&0!=c||0==e&&0==c)n=null;else if(1<e&&(e=1),1<c&&(c=1),-1>e&&(e=-1),-1>c&&(c=-1),!(1==e&&0==(n.clues&1)||1==c&&0==(n.clues&2)||-1==e&&0==(n.clues&4)||-1==c&&0==(n.clues&8))){var g=!0,f=0;a:for(;f<l;f++)for(var h=0;h<m;h++)if(d[f][h].value==k){if(0>f+e||f+e>=l||0>h+c||h+c>=m){g=!1;break a}if(d[f+e][h+c].value!=k&&d[f+e][h+c].value!=nil){g=!1;break a}}if(g){for(f=0;f<l;f++)for(h=0;h<m;h++)d[f][h].marked=
!1;for(g=!0;g;)for(g=!1,f=0;f<l;f++)for(h=0;h<m;h++)d[f][h].value==k&&!d[f][h].marked&&0<=f+e&&f+e<l&&0<=h+c&&h+c<m&&d[f+e][h+c].value==nil&&(g=!0,d[f+e][h+c].marked=!0,d[f+e][h+c].value=d[f][h].value,d[f+e][h+c].label=d[f][h].label,d[f+e][h+c].clues=d[f][h].clues,d[f][h].value=d[f][h].label=nil,d[f][h].clues=0);var p=b.value;b.value=nil;Object.getPrototypeOf(this).makeMove2.call(this,b,1E3+n.y*l+n.x,0);b.value=p;k!=v&&(a.score.current++,v=k);n=b}}}}catch(u){throw a.exception(u),u;}};a.onShiftF10=
function(b){try{b="";for(var k=0;k<a.levels.length;k++){a.select(k);b+='&lt;?xml version="1.0"?&gt;\n';b+='&lt;SBPuzzle Width="'+l+'" Height="'+m+'" IndirectPushAllowed="False" MultiDirectionalMoves="False" CompactLines="False"&gt;\n';for(var e=1;;e++){for(var c=nil,g=nil,f=nil,h=nil,n=nil,q=nil,r=0;r<l;r++)for(var t=0;t<m;t++)d[r][t].value==e&&(g=r,n=t,c==nil&&(c=r,h=t)),f==nil&&d[r][t].solution==e&&(f=r,q=t);if(c==nil)break;b+='  &lt;Piece Width="'+(g-c+1)+'" Height="'+(n-h+1)+'" Color="-16777201" Caption="" ';
b="cars"==a.level.variant?b+('VSliding="'+(h!=n)+'" HSliding="'+(c!=g)+'"&gt;\n'):b+'VSliding="True" HSliding="True">\n';b+='    &lt;InitialPos Line="'+h+'" Col="'+c+'"/&gt;\n';f!=nil&&(b+='    &lt;GoalPos Line="'+q+'" Col="'+f+'"/&gt;\n');b+="  &lt;/Piece&gt;\n"}b+="&lt;/SBPuzzle&gt;\n"}new ojpopup(b);a.select(0)}catch(w){throw a.exception(w),w;}};a.paintInfo=function(b){try{b=a.uis.get("moves")+": "+a.score.current+" ("+a.score.best+") ["+a.score.high+"] ",a.paintToImage&&(a.infoText=b=""),Object.getPrototypeOf(this).paintInfo.call(this,
b)}catch(k){throw a.exception(k),k;}};a.paintCell=function(b){try{var k=a.canvas.getContext("2d");k.fillStyle=b.value==nil?a.uic.gray:0==b.value?a.uic.gate:-2==b.value?a.uic.wall:a.uic.tiles[b.value]?a.uic.tiles[b.value]:"cars"==a.level.variant?10==b.clues?a.uic.cars[1]:5==b.clues?a.uic.cars[2]:a.uic.cars[3]:a.uic.tiles[0];k.fillRect(b.px,b.py,a.unit.x,a.unit.y);if(!a.level.shade&&b.solution!=nil){var e={fill:a.uic.none,width:2};e.stroke="cars"==a.level.variant?a.uic.goal:a.uic.tiles[b.solution]?
a.uic.tiles[b.solution]:a.uic.tiles[0];e.scale=70;a.paintCircle(b,e);e.scale=50;a.paintCircle(b,e);e.scale=30;a.paintCircle(b,e);e.scale=10;a.paintCircle(b,e)}1==b.value&&b.label==nil&&a.paintCircle(b,{fill:a.uic.black,stroke:a.uic.black,scale:40});b.label!=nil&&(100>b.label?a.paintText(b.label.toString(),b,{color:a.uic.text,scale:60}):a.paintText(String.fromCharCode(b.label-100),b,{color:a.uic.text,scale:60}));if(b.value!=nil){k.lineWidth=1;k.beginPath();k.strokeStyle=a.uic.buttonBorderLight;if(0==
b.x||d[b.x-1][b.y].value!=b.value){var c=0==b.x?2:1;k.moveTo(b.px+c,b.py+a.unit.y-1);k.lineTo(b.px+c,b.py+1)}if(0==b.y||d[b.x][b.y-1].value!=b.value){var g=0==b.y?2:1;k.moveTo(b.px+1,b.py+g);k.lineTo(b.px+a.unit.x-1,b.py+g)}k.stroke();k.beginPath();k.strokeStyle=a.uic.buttonBorderDark;if(b.x==l-1||d[b.x+1][b.y].value!=b.value)k.moveTo(b.px+a.unit.x-1,b.py+1),k.lineTo(b.px+a.unit.x-1,b.py+a.unit.y-1);if(b.y==m-1||d[b.x][b.y+1].value!=b.value)k.moveTo(b.px+a.unit.x-1,b.py+a.unit.y-1),k.lineTo(b.px+
1,b.py+a.unit.y-1);k.stroke()}}catch(f){throw a.exception(f),f;}}}SlidingBlocks.prototype=new Puzzle;
